user www-data;
worker_processes auto;
pid /run/nginx.pid;

include /etc/nginx/modules-enabled/*.conf;
#include /etc/nginx/conf.d/*.conf;
#include /etc/nginx/sites-enabled/*.conf;

events {
  worker_connections 768;
  # multi_accept on;
}

http {
    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
    client_max_body_size 100m;
    map_hash_bucket_size 128;
     map $request_uri $new_uri {
        include /etc/nginx/urlredirect.map; # Replace with the actual path to your mapping file
        
    }
  server {
    listen  80;
    gzip on;
    gzip_proxied no-cache no-store private expired auth;
    gzip_min_length 1000;
    gzip_comp_level 6;
    gzip_types application/atom+xml
    application/geo+json
    application/javascript
    application/x-javascript
    application/json
    application/ld+json
    application/manifest+json
    application/rdf+xml
    application/rss+xml
    application/xhtml+xml
    application/xml
    font/eot
    font/otf
    font/ttf
    image/svg+xml
    text/css
    text/javascript
    text/plain
    text/xml;

    server_name api.thepipingmart.com , api.pipingmart.in , pipe.invithi.com;
   # include /etc/nginx/conf.d/*.conf;
  #  include /etc/nginx/sites-enabled/*;
    location / {
      #rewrite /auth/(.*)$ /$1 break;

      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $host;
      proxy_set_header X-NginX-Proxy true;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "upgrade";
      #proxy_set_header X-Ssl on;

      proxy_pass http://pipeing_backend;
        proxy_redirect off;
    }

    #return 301 https://$host$request_uri;
  }

  server {
    listen  80;
    gzip on;
    gzip_proxied no-cache no-store private expired auth;
    gzip_min_length 1000;
    gzip_comp_level 6;
    gzip_types application/atom+xml
    application/geo+json
    application/javascript
    application/x-javascript
    application/json
    application/ld+json
    application/manifest+json
    application/rdf+xml
    application/rss+xml
    application/xhtml+xml
    application/xml
    font/eot
    font/otf
    font/woff2
    font/woff
    font/ttf
    image/svg+xml
    text/css
    text/javascript
    text/plain
    text/xml;
    root /home/ubuntu/pipingMartReactAdmin;
    server_name admin.thepipingmart.com , admin.pipingmart.com;
    location / {
      try_files $uri $uri/ /index.html;
    }
    location ~*^.+\.css$ {
      default_type text/css;
    }

    location ~*^.+\.js$ {
      default_type text/javascript;
    }

    #return 301 https://$host$request_uri;

  }

  server {
    listen  443;
    gzip on;
    gzip_proxied no-cache no-store private expired auth;
    gzip_min_length 1000;
    gzip_comp_level 6;
    gzip_types application/atom+xml
    application/geo+json
    application/javascript
    application/x-javascript
    application/json
    application/ld+json
    application/manifest+json
    application/rdf+xml
    application/rss+xml
    application/xhtml+xml
    application/xml
    font/eot
    font/otf
    font/ttf
    image/svg+xml
    text/css
    text/javascript
    text/plain
    text/xml;

    server_name api.thepipingmart.com , api.pipingmart.in , pipe.invithi.com;
    include /etc/nginx/conf.d/*.conf;
    location / {
      #rewrite /auth/(.*)$ /$1 break;

      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-NginX-Proxy true;
      #proxy_set_header X-Ssl on;

      proxy_pass http://pipeing_backend;
        proxy_redirect off;
    }

    #return 301 https://$host$request_uri;
  }

  server {
    listen 80;
    gzip on;
    gzip_proxied no-cache no-store private expired auth;
    gzip_min_length 1000;
    gzip_comp_level 6;
    gzip_types application/atom+xml
    application/geo+json
    application/javascript
    application/x-javascript
    application/json
    application/ld+json
    application/manifest+json
    application/rdf+xml
    application/rss+xml
    application/xhtml+xml
    application/xml
    font/eot
    font/otf
    font/ttf
    image/svg+xml
    text/css
    text/javascript
    text/plain
    text/xml;

    #                ssl on;
    #                ssl_certificate /var/www/html/ssl/bundle.crt;
    #                ssl_certificate_key /var/www/html/ssl/server_private.key;
    server_name thepipingmart.com , pipingmart.in;
    access_log /var/log/nginx/nginx.vhost.access.log;
    error_log /var/log/nginx/nginx.vhost.error.log;

    return 301 https://www.thepipingmart.com$request_uri;


  }
   
  server {
    listen 80;
    gzip on;
    gzip_proxied no-cache no-store private expired auth;
    gzip_min_length 1000;
    gzip_comp_level 6;
    gzip_types application/atom+xml
    application/geo+json
    application/javascript
    application/x-javascript
    application/json
    application/ld+json
    application/manifest+json
    application/rdf+xml
    application/rss+xml
    application/xhtml+xml
    application/xml
    font/eot
    font/otf
    font/ttf
    image/svg+xml
    text/css
    text/javascript
    text/plain
    text/xml;

    #                ssl on;
    #                ssl_certificate /var/www/html/ssl/bundle.crt;
    #                ssl_certificate_key /var/www/html/ssl/server_private.key;
    server_name www.thepipingmart.com , www.pipingmart.in;
    access_log /var/log/nginx/nginx.vhost.access.log;
    error_log /var/log/nginx/nginx.vhost.error.log;
     if ($new_uri) {
       return 301 $new_uri;
    }
    location ~ ^/material/(nickel-alloy-filler-wire-Getting|manganese-steel-sheet-plates|brass-bars|nickel-alloy-pipes|mild-steel-ptfe-lined-pipe-fittings|brass-nuts|stainless-steel-pipes-in-ahmedabad|manganese-steel-pipes|monel-bars|monel-nuts|brass-bolts|brass-screw|copper-bars|copper-nuts|haynes-bars|monel-bolts|monel-pipes|monel-screw|brass-tubing|brass-washer|copper-bolts|copper-screw|incoloy-bars|incoloy-nuts|inconel-bars|inconel-nuts) {
    return 301 https://www.thepipingmart.com/product/$1;
}
   location ~ ^/material/(inconel-bars|inconel-nuts|monel-tubing|monel-valves|monel-washer|nimonic-bars|nimonic-nuts|niobium-bars|copper-washer|incoloy-bolts|incoloy-pipes|incoloy-screw|inconel-bolts|inconel-pipes|inconel-screw|monel-flanges|nimonic-bolts|nimonic-screw|nitronic-bars|nitronic-nuts) {
    return 301 https://www.thepipingmart.com/product/$1;
}
location ~ ^/material/(tantalum-bars|titanium-bars|titanium-nuts|hastelloy-bars|hastelloy-nuts|incoloy-tubing|incoloy-valves|incoloy-washer|inconel-tubing|inconel-valves|inconel-washer|nimonic-washer|nitronic-bolts|nitronic-screw|titanium-bolts|titanium-pipes|titanium-screw|aluminium-pipes|brass-fasteners|hastelloy-bolts) {
    return 301 https://www.thepipingmart.com/product/$1;
}


location ~ ^/material/(hastelloy-pipes|hastelloy-screw|incoloy-flanges|inconel-flanges|monel-fasteners|nilo-alloy-bars|nitronic-washer|titanium-tubing|titanium-valves|titanium-washer|alloy-steel-bars|alloy-steel-nuts|aluminium-tubing|brass-stud-bolts|copper-fasteners|hastelloy-tubing|hastelloy-valves|hastelloy-washer|monel-electrodes|monel-stud-bolts) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(titanium-flanges|alloy-steel-bolts|alloy-steel-pipes|alloy-steel-screw|carbon-steel-bars|copper-stud-bolts|duplex-steel-bars|duplex-steel-nuts|hastelloy-flanges|incoloy-fasteners|inconel-fasteners|nickel-alloy-bars|nickel-alloy-nuts|nimonic-fasteners|alloy-steel-tubing|alloy-steel-washer|brass-sheet-plates|carbon-steel-pipes|copper-nickel-bars|copper-nickel-nuts) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(duplex-steel-bolts|duplex-steel-pipes|duplex-steel-screw|incoloy-electrodes|incoloy-stud-bolts|inconel-electrodes|inconel-stud-bolts|jethete-steel-bars|monel-sheet-plates|nickel-alloy-bolts|nickel-alloy-screw|nimonic-stud-bolts|nitronic-fasteners|titanium-fasteners|alloy-steel-flanges|carbon-steel-tubing|copper-nickel-bolts|copper-nickel-pipes|copper-nickel-screw|copper-sheet-plates) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(duplex-steel-tubing|duplex-steel-valves|duplex-steel-washer|hastelloy-fasteners|monel-pipe-fittings|nickel-alloy-tubing|nickel-alloy-valves|nickel-alloy-washer|nitronic-stud-bolts|silicon-bronze-nuts|titanium-electrodes|titanium-stud-bolts|carbon-steel-flanges|copper-nickel-tubing|copper-nickel-valves|copper-nickel-washer|duplex-steel-flanges|hastelloy-electrodes|hastelloy-stud-bolts|incoloy-sheet-plates) {
    return 301 https://www.thepipingmart.com/product/$1;
}


location ~ ^/material/(inconel-sheet-plates|nickel-alloy-flanges|niobium-sheet-plates|silicon-bronze-bolts|silicon-bronze-screw|stainless-steel-bars|stainless-steel-nuts|alloy-steel-fasteners|aluminium-bronze-nuts|brass-forged-fittings|copper-nickel-flanges|incoloy-pipe-fittings|inconel-pipe-fittings|monel-forged-fittings|silicon-bronze-washer|stainless-steel-bolts|stainless-steel-pipes|stainless-steel-screw|tantalum-sheet-plates|titanium-sheet-plates) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(alloy-steel-stud-bolts|aluminium-bronze-bolts|aluminium-bronze-screw|aluminium-sheet-plates|duplex-steel-fasteners|hastelloy-sheet-plates|nickel-alloy-fasteners|stainless-steel-tubing|stainless-steel-valves|stainless-steel-washer|titanium-pipe-fittings|aluminium-bronze-washer|aluminium-pipe-fittings|copper-nickel-fasteners|duplex-steel-electrodes|duplex-steel-stud-bolts|hastelloy-pipe-fittings|incoloy-forged-fittings|inconel-forged-fittings|nickel-alloy-electrodes) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(nickel-alloy-stud-bolts|phosphorous-bronze-nuts|stainless-steel-flanges|super-duplex-steel-bars|super-duplex-steel-nuts|tool-and-die-steel-bars|alloy-steel-sheet-plates|copper-nickel-electrodes|copper-nickel-stud-bolts|phosphorous-bronze-bolts|phosphorous-bronze-screw|silicon-bronze-fasteners|super-duplex-steel-bolts|super-duplex-steel-pipes|super-duplex-steel-screw|titanium-forged-fittings|stainless-steel-channels|alloy-steel-pipe-fittings|aluminium-forged-fittings|carbon-steel-sheet-plates) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(duplex-steel-sheet-plates|hastelloy-forged-fittings|nickel-alloy-sheet-plates|phosphorous-bronze-washer|silicon-bronze-stud-bolts|stainless-steel-fasteners|super-duplex-steel-tubing|super-duplex-steel-valves|super-duplex-steel-washer|aluminium-bronze-fasteners|carbon-steel-pipe-fittings|carbon-steel-ptfe-strainer|copper-nickel-sheet-plates|duplex-steel-pipe-fittings|nickel-alloy-pipe-fittings|stainless-steel-electrodes|stainless-steel-stud-bolts|super-duplex-steel-flanges|alloy-steel-forged-fittings|aluminium-bronze-stud-bolts) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(beryllium-copper-alloy-bars|copper-nickel-pipe-fittings|nickel-alloy-forged-fittings|phosphorous-bronze-fasteners|stainless-steel-filler-wire|stainless-steel-sheet-plates|super-duplex-steel-fasteners|carbon-steel-ptfe-lined-pipe-fittings|ballistic-steel-sheet-plates|carbon-steel-forged-fittings|carbon-steel-ptfe-lined-pipe|duplex-steel-forged-fittings|copper-nickel-forged-fittings|phosphorous-bronze-stud-bolts|stainless-steel-ptfe-strainer|structural-steel-sheet-plates|super-duplex-steel-electrodes|super-duplex-steel-stud-bolts|stainless-steel-pipe-fittings|carbon-steel-ptfe-lined-valves) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(monel-instrumentation-fittings|stainless-steel-ptfe-lined-pipe-fittings|abrasion-resistant-sheet-plates|carbon-steel-ptfe-lined-flanges|stainless-steel-forged-fittings|stainless-steel-ptfe-lined-pipe|super-duplex-steel-sheet-plates|corrosion-resistant-sheet-plates|incoloy-instrumentation-fittings|inconel-instrumentation-fittings|ship-building-steel-sheet-plates|super-duplex-steel-pipe-fittings|stainless-steel-ptfe-lined-valves|titanium-instrumentation-fittings|hastelloy-instrumentation-fittings|stainless-steel-ptfe-lined-flanges|super-duplex-steel-forged-fittings|carbon-steel-ptfe-lined-sight-glass|stainless-steel-electropolished-pipe|stainless-steel-ptfe-lined-sight-glass|stainless-steel-instrumentation-fittings) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(stainless-steel-ptfe-lined-pipe-fittings|aluminium-filler-wire|carbon-steel-channels|carbon-steel-ptfe-lined-pipe-fittings|copper-nickel-instrumentation-fittings|duplex-steel-filler-wire|duplex-steel-instrumentation-fittings|high-speed-steel-bars|high-tensile-steel-sheet-plates|low-temperature-carbon-steel-flanges|low-temperature-carbon-steel-forged-fittings|low-temperature-carbon-steel-pipe-fittings|low-temperature-carbon-steel-pipes|low-temperature-carbon-steel-sheet-plates|nickel-alloy-instrumentation-fittings|super-duplex-steel-filler-wire|super-duplex-steel-instrumentation-fittings|titanium-filler-wire) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(copper-pipes|brass-pipe-fittings|brass-pipes|brass-flanges|copper-filler-wire|copper-flanges|copper-nickel-filler-wire|copper-pipe-fittings|hastelloy-filler-wire|incoloy-filler-wire|inconel-filler-wire|manganese-steel-pipes|mild-steel-ptfe-lined-flanges|mild-steel-ptfe-lined-pipe|mild-steel-ptfe-lined-valves|mild-steel-ptfe-lined-sight-glass|mild-steel-ptfe-lined-pipe-fittings|mild-steel-ptfe-strainer|monel-filler-wire|tantalum-pipes) {
    return 301 https://www.thepipingmart.com/product/$1;
}

location ~ ^/material/(tantalum-tubing|stainless-steel-pipes-in-ahmedabad|phosphorous-bronze-pipes|niobium-tubing|niobium-pipes|nimonic-pipes|nickel-alloy-filler-wire|nickel-alloy-pipes|brass-bars) {
    return 301 https://www.thepipingmart.com/product/$1;
}
    

    location / {
      #                        try_files $uri $uri/ /index.html;
      proxy_pass http://pipeing_product_renderer;
      ##                                proxy_http_version 1.1;
      ##                                proxy_set_header Upgrade $http_upgrade;
      ##                        proxy_set_header Connection 'upgrade';
      ##                        proxy_set_header Host $host;
      ##                        proxy_cache_bypass $http_upgrade;
      #
   
    }

    location /sitemap.xml {
      root /home/ubuntu/sitemap;
      default_type text/xml;
    }

    location /robots.txt {
      root /home/ubuntu/sitemap;
      default_type text/xml;
    }


    location /materials-sitemap.xml {
      root /home/ubuntu/sitemap;
      default_type text/xml;
    }


    location /profile {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      proxy_pass http://pipeing_client_server_side;

      #        proxy_http_version 1.1;
      #        proxy_set_header Upgrade $http_upgrade;
      #proxy_set_header Connection 'upgrade';
      #proxy_set_header Host $host;
      #proxy_cache_bypass $http_upgrade;

    }

    location /supplier-registration {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      proxy_pass http://pipeing_client_server_side;
      #        proxy_http_version 1.1;
      #        proxy_set_header Upgrade $http_upgrade;
      #proxy_set_header Connection 'upgrade';
      #proxy_set_header Host $host;
      #proxy_cache_bypass $http_upgrade;

    }

    location /supplier-login {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      proxy_pass http://pipeing_client_server_side;
      #        proxy_http_version 1.1;
      #        proxy_set_header Upgrade $http_upgrade;
      #proxy_set_header Connection 'upgrade';
      #proxy_set_header Host $host;
      #proxy_cache_bypass $http_upgrade;

    }

    location /forgot-password {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      #        try_files $uri $uri/ /index.html;
      proxy_pass http://pipeing_client_server_side;
      #        proxy_http_version 1.1;
      #        proxy_set_header Upgrade $http_upgrade;
      #proxy_set_header Connection 'upgrade';
      #proxy_set_header Host $host;
      #proxy_cache_bypass $http_upgrade;

    }


    location /product/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /material/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /products/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /supplier/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /about {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }
    location /testimonial/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }


    location /pricing/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /contact-us/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /who-we-are/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /faq {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /news {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /requirement/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /news-detail/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }
    location /primeCompanies/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /all-supplier/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /browseSupplier/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /blog/ {
      rewrite ^/blog(.*)$ https://blog.thepipingmart.com$1 permanent;
      #rewrite /blog/(.*)$ /$1 break;
      #proxy_pass https://blog.pipingmart.in/$args;
      #index index.php index.html index.htm;
      #root /var/www/wordpress;
      #try_files $uri $uri/ /index.php?$args;
      #rewrite ^/blog(.*)$ https://blog.pipingmart.in/$1 redirect;

    }

    location /terms-and-conditions {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /disclaimer/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /api/ {
      proxy_pass http://pipeing_client_server_side;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;
    }
    location =/favicon.ico {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      access_log off;
      log_not_found off;
    }

    location =/robots.txt {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      access_log off;
      log_not_found off;
    }

    location ~*^.+\.js$ {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      expires max;
      default_type text/javascript;
      log_not_found off;
    }
    location ~*^.+\.css$ {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      default_type text/css;
      log_not_found off;
    }
    location ~*^.+\.ttf {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      default_type text/css;
      log_not_found off;
    }
    location ~*^.+\.woff {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      default_type text/css;
      log_not_found off;
    }
    location ~*^.+\.woff2 {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      default_type text/css;
      log_not_found off;
    }
  }

  server {
    listen 443;
    gzip on;
    gzip_proxied no-cache no-store private expired auth;
    gzip_min_length 1000;
    gzip_comp_level 6;
    gzip_types application/atom+xml
    application/geo+json
    application/javascript
    application/x-javascript
    application/json
    application/ld+json
    application/manifest+json
    application/rdf+xml
    application/rss+xml
    application/xhtml+xml
    application/xml
    font/eot
    font/otf
    font/ttf
    image/svg+xml
    text/css
    text/javascript
    text/plain
    text/xml;

    #                ssl on;
    #                ssl_certificate /var/www/html/ssl/bundle.crt;
    #                ssl_certificate_key /var/www/html/ssl/server_private.key;
    server_name thepipingmart.com , www.thepipingmart.com , pipingmart.in , www.pipingmart.in;
    access_log /var/log/nginx/nginx.vhost.access.log;
    error_log /var/log/nginx/nginx.vhost.error.log;

    location / {
      #                        try_files $uri $uri/ /index.html;
      proxy_pass http://pipeing_product_renderer;
      ##                                proxy_http_version 1.1;
      ##                                proxy_set_header Upgrade $http_upgrade;
      ##                        proxy_set_header Connection 'upgrade';
      ##                        proxy_set_header Host $host;
      ##                        proxy_cache_bypass $http_upgrade;
      #
    }

    location /sitemap.xml {
      root /home/ubuntu/sitemap;
      default_type text/xml;
    }

    location /profile {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      proxy_pass http://pipeing_client_server_side;

      #        proxy_http_version 1.1;
      #        proxy_set_header Upgrade $http_upgrade;
      #proxy_set_header Connection 'upgrade';
      #proxy_set_header Host $host;
      #proxy_cache_bypass $http_upgrade;

    }

    location /supplier-registration {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      proxy_pass http://pipeing_client_server_side;
      #        proxy_http_version 1.1;
      #        proxy_set_header Upgrade $http_upgrade;
      #proxy_set_header Connection 'upgrade';
      #proxy_set_header Host $host;
      #proxy_cache_bypass $http_upgrade;

    }

    location /supplier-login {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      proxy_pass http://pipeing_client_server_side;
      #        proxy_http_version 1.1;
      #        proxy_set_header Upgrade $http_upgrade;
      #proxy_set_header Connection 'upgrade';
      #proxy_set_header Host $host;
      #proxy_cache_bypass $http_upgrade;

    }

    location /forgot-password {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      #        try_files $uri $uri/ /index.html;
      proxy_pass http://pipeing_client_server_side;
      #        proxy_http_version 1.1;
      #        proxy_set_header Upgrade $http_upgrade;
      #proxy_set_header Connection 'upgrade';
      #proxy_set_header Host $host;
      #proxy_cache_bypass $http_upgrade;

    }


    location /product/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /material/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /products/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /supplier/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /about/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }
    location /testimonial/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }


    location /pricing/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /contact-us {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /who-we-are/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /faq/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /news/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /requirement/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /news-detail/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }
    location /primeCompanies/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /all-supplier/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /browseSupplier/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /blog/ {
      rewrite ^/blog(.*)$ https://blog.thepipingmart.com$1 permanent;
      #rewrite /blog/(.*)$ /$1 break;
      #proxy_pass https://blog.pipingmart.in/$args;
      #index index.php index.html index.htm;
      #root /var/www/wordpress;
      #try_files $uri $uri/ /index.php?$args;
      #rewrite ^/blog(.*)$ https://blog.pipingmart.in/$1 redirect;

    }

    location /terms-and-conditions/ {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }

    location /disclaimer {
      proxy_pass http://pipeing_product_renderer;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

    }


    location /api/ {
      proxy_pass http://pipeing_client_server_side;
        proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;
    }
    location =/favicon.ico {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      access_log off;
      log_not_found off;
    }

    location =/robots.txt {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      access_log off;
      log_not_found off;
    }

    location ~*^.+\.js$ {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      expires max;
      default_type text/javascript;
      log_not_found off;
    }
    location ~*^.+\.css$ {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      default_type text/css;
      log_not_found off;
    }
    location ~*^.+\.ttf {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      default_type text/css;
      log_not_found off;
    }
    location ~*^.+\.woff {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      default_type text/css;
      log_not_found off;
    }
    location ~*^.+\.woff2 {
      root /home/ubuntu/pipingMartClient/dist/pipingMartClient/browser;
      default_type text/css;
      log_not_found off;
    }
  }


  server {
    listen 80;
    root /var/www/wordpress/;
    index  index.php index.html index.htm;
    server_name blog.pipingmart.in , blog.thepipingmart.com;
    error_log /var/log/nginx/wordpress_error.log;
    access_log /var/log/nginx/wordpress_access.log;

    client_max_body_size 100M;
    location / {
      try_files $uri $uri/ /index.php?$args;
    }
    location ~ \.php$ {
      include snippets/fastcgi-php.conf;
      fastcgi_pass unix:/run/php/php7.4-fpm.sock;
      fastcgi_param   SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location =/favicon.ico {
      access_log off;
      log_not_found off;
    }

    location ~*^.+\.js$ {
      expires max;
      default_type text/javascript;
      log_not_found off;
    }
    location ~*^.+\.css$ {
      default_type text/css;
      log_not_found off;
    }
  }


  upstream pipeing_backend {
    server 127.0.0.1:3050;
  }
  upstream pipeing_client_server_side {
    server 127.0.0.1:4000;
  }
  upstream pipeing_product_renderer {
    server 127.0.0.1:3000;
  }

  upstream pipeing_old_blog_server_http {
    server 13.233.233.215;
  }

  upstream pipeing_old_blog_server_https {
    server 13.233.233.215;
  }
}

